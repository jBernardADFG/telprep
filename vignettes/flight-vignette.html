<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Processing flight data tutorial</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Processing flight data tutorial</h1>



<p>This vignette will show you how the telprep package works and how it can be used to process data from telemetry flights. The program is designed to read in raw data, filter out erroneous signals, and help determine the living status of fish.</p>
<div id="program-workflow" class="section level3">
<h3>Program Workflow:</h3>
<ul>
<li>Step 1 – Read the raw data into R</li>
<li>Step 2 – If channels or dates were misprogrammed, make corrections</li>
<li>Step 3 – Combine the contents of the data in the folder</li>
<li>Step 4 – Determine the best locations and flag false detections</li>
<li>Step 5 – Determine the living status of the fish</li>
<li>Step 6 – Add the results to an existing database</li>
</ul>
</div>
<div id="step-1-read-the-raw-data-into-r" class="section level3">
<h3>Step 1 – Read the raw data into R</h3>
<p>To use the telprep package, stick the telemetry flight txt files that you want to process into a folder. You can name the files however you choose; however, the names should be recognizable as they will be used later on. Find the path of the folder on your system and use the following lines of code to read the data into R:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">folder_path &lt;-<span class="st"> &quot;D:/Jordy/telprep/telprep2/data/&quot;</span> <span class="co"># Use your folder path here</span></a>
<a class="sourceLine" id="cb1-2" title="2">raw_data &lt;-<span class="st"> </span><span class="kw">read.flight.data</span>(folder_path, <span class="dt">remove_999 =</span> T, <span class="dt">mort_sig =</span> T)</a></code></pre></div>
<p>All of the data in the folder has been imported into R. To see how the data is organized, play around with the following lines of code:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">head</span>(<span class="kw">names</span>(raw_data))</a></code></pre></div>
<pre><code>## [1] &quot;tburb_f1_1-26-19-BELLY.TXT&quot; &quot;tburb_f1_1-26-19-WING.TXT&quot; 
## [3] &quot;tburb_f1_1-27-19-BELLY.TXT&quot; &quot;tburb_f1_1-27-19-WING.TXT&quot; 
## [5] &quot;tburb_f2_2-6-19-BELLY.TXT&quot;  &quot;tburb_f2_2-6-19-WING.TXT&quot;</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">head</span>(raw_data[[<span class="dv">2</span>]])</a></code></pre></div>
<pre><code>##              DateTime Channel TagID Antenna Power Latitude Longitude
## 1 2019-01-25 14:10:48      35    80     AH0   120 64.86179 -147.7410
## 3 2019-01-26 09:30:09      10    42     AH0   111 64.76886 -147.7900
## 4 2019-01-26 09:30:21      10    42     AH0   124 64.76596 -147.7782
## 5 2019-01-26 09:30:46      10    42     AH0   129 64.76004 -147.7546
## 6 2019-01-26 09:30:58      10    42     AH0    97 64.75712 -147.7425
## 7 2019-01-26 09:31:10      10    42     AH0    61 64.75407 -147.7304
##   Status
## 1 Active
## 3   Mort
## 4   Mort
## 5   Mort
## 6   Mort
## 7   Mort</code></pre>
<p>Here, names(raw_data) tells you how the raw data is ordered in the list. Because “tburb_f1_1-26-19-WING.TXT” is listed 2nd, raw_data[[2]] displays the data from this file.</p>
</div>
<div id="step-2-if-channels-or-dates-were-misprogrammed-make-corrections" class="section level3">
<h3>Step 2 – If channels or dates were misprogrammed, make corrections</h3>
<p>If a channel or date was misprogrammed, it needs to be corrected before the raw data is combined. We will suppose that channel 3 was misprogrammed as channel 10 in “tburb_f1_1-26-19-WING.TXT”. The following lines will make the correction:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">raw_data[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw">channels.merge</span>(raw_data[[<span class="dv">2</span>]], <span class="dv">10</span>, <span class="dv">3</span>) <span class="co"># see help(merge_channels)</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">head</span>(raw_data[[<span class="dv">2</span>]])</a></code></pre></div>
<pre><code>##              DateTime Channel TagID Antenna Power Latitude Longitude
## 1 2019-01-25 14:10:48      35    80     AH0   120 64.86179 -147.7410
## 3 2019-01-26 09:30:09       3    42     AH0   111 64.76886 -147.7900
## 4 2019-01-26 09:30:21       3    42     AH0   124 64.76596 -147.7782
## 5 2019-01-26 09:30:46       3    42     AH0   129 64.76004 -147.7546
## 6 2019-01-26 09:30:58       3    42     AH0    97 64.75712 -147.7425
## 7 2019-01-26 09:31:10       3    42     AH0    61 64.75407 -147.7304
##   Status
## 1 Active
## 3   Mort
## 4   Mort
## 5   Mort
## 6   Mort
## 7   Mort</code></pre>
<p>If a date was misprogramed, use the code</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">head</span>(raw_data[[<span class="dv">16</span>]]) <span class="co"># 2003 ?</span></a></code></pre></div>
<pre><code>##               DateTime Channel TagID Antenna Power Latitude Longitude
## 1  2003-04-25 08:14:11      40    30      A0    49 64.86199 -147.7411
## 3  2003-04-25 08:14:21      40    26      A0    65 64.86197 -147.7411
## 5  2003-04-25 08:14:23      40    30      A0    52 64.86197 -147.7411
## 7  2003-04-25 08:14:24      40    25      A0    49 64.86197 -147.7411
## 11 2003-04-25 08:14:32      40    57      A0    49 64.86196 -147.7411
## 12 2003-04-25 08:14:33      40    31      A0    69 64.86196 -147.7411
##    Status
## 1  Active
## 3  Active
## 5  Active
## 7  Active
## 11   Mort
## 12 Active</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">raw_data[[<span class="dv">16</span>]] &lt;-<span class="st"> </span><span class="kw">replace.date</span>(raw_data[[<span class="dv">16</span>]], <span class="dt">new_date =</span><span class="st">&quot;04/25/19&quot;</span>) <span class="co"># see help(replace.date)?</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">head</span>(raw_data[[<span class="dv">16</span>]])</a></code></pre></div>
<pre><code>##               DateTime Channel TagID Antenna Power Latitude Longitude
## 1  2019-04-25 08:14:11      40    30      A0    49 64.86199 -147.7411
## 3  2019-04-25 08:14:21      40    26      A0    65 64.86197 -147.7411
## 5  2019-04-25 08:14:23      40    30      A0    52 64.86197 -147.7411
## 7  2019-04-25 08:14:24      40    25      A0    49 64.86197 -147.7411
## 11 2019-04-25 08:14:32      40    57      A0    49 64.86196 -147.7411
## 12 2019-04-25 08:14:33      40    31      A0    69 64.86196 -147.7411
##    Status
## 1  Active
## 3  Active
## 5  Active
## 7  Active
## 11   Mort
## 12 Active</code></pre>
</div>
<div id="step-3-combine-the-contents-of-the-data-in-the-folder" class="section level3">
<h3>Step 3 – Combine the contents of the data in the folder</h3>
<p>The next step is to combine the contents of the data using the function combine.data. Before combining the file contents, the source of the file must be determined (i.e. was the receiver on the belly or wing of the aircraft). To combine the contents into a variable named all_data, run the following lines:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">head</span>(<span class="kw">names</span>(raw_data)) <span class="co"># to determine source_vec</span></a></code></pre></div>
<pre><code>## [1] &quot;tburb_f1_1-26-19-BELLY.TXT&quot; &quot;tburb_f1_1-26-19-WING.TXT&quot; 
## [3] &quot;tburb_f1_1-27-19-BELLY.TXT&quot; &quot;tburb_f1_1-27-19-WING.TXT&quot; 
## [5] &quot;tburb_f2_2-6-19-BELLY.TXT&quot;  &quot;tburb_f2_2-6-19-WING.TXT&quot;</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">source_vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;belly&quot;</span>,<span class="st">&quot;wing&quot;</span>), <span class="dv">10</span>), <span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;wing&quot;</span>,<span class="st">&quot;belly&quot;</span>),<span class="dv">2</span>), <span class="kw">c</span>(<span class="st">&quot;belly&quot;</span>,<span class="st">&quot;wing&quot;</span>))</a>
<a class="sourceLine" id="cb14-2" title="2">all_data &lt;-<span class="st"> </span><span class="kw">combine.data</span>(raw_data, source_vec) <span class="co"># See help(combine.data)</span></a></code></pre></div>
</div>
<div id="step-4-determine-the-best-locations-and-flag-false-detections" class="section level3">
<h3>Step 4 – Determine the best locations and flag false detections</h3>
<p>Now that the raw data has been combined, the best location will be determined and erroneous detections will be flagged using the function get.best.locations:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">best_locations &lt;-<span class="st"> </span><span class="kw">get.best.locations</span>(all_data, <span class="dt">bin_by =</span> <span class="dv">1</span>, <span class="dt">n_thresh =</span> <span class="dv">5</span>, <span class="dt">dist_max =</span> <span class="dv">10</span>, <span class="dt">remove_flagged =</span> F) <span class="co"># See help(process_data)</span></a></code></pre></div>
<pre><code>## [1] &quot;Be patient -- this could take a few minutes&quot;
## [1] 0.03
## [1] 0.06
## [1] 0.09
## [1] 0.12
## [1] 0.15
## [1] 0.18
## [1] 0.21
## [1] 0.24
## [1] 0.27
## [1] 0.3
## [1] 0.33
## [1] 0.36
## [1] 0.39
## [1] 0.42
## [1] 0.45
## [1] 0.48
## [1] 0.52
## [1] 0.55
## [1] 0.58
## [1] 0.61
## [1] 0.64
## [1] 0.67
## [1] 0.7
## [1] 0.73
## [1] 0.76
## [1] 0.79
## [1] 0.82
## [1] 0.85
## [1] 0.88
## [1] 0.91
## [1] 0.94
## [1] 0.97
## [1] 1</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">all_detects &lt;-<span class="st"> </span>best_locations<span class="op">$</span>all_detects</a>
<a class="sourceLine" id="cb17-2" title="2">best_detects &lt;-<span class="st"> </span>best_locations<span class="op">$</span>best_detects</a></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">head</span>(all_detects)</a></code></pre></div>
<pre><code>##                  DateTime Channel TagID Antenna Power Latitude Longitude
## 6498  2003-04-10 08:40:43      34    80      A0    68 64.86179 -147.7414
## 65010 2003-04-17 03:14:02      10     2      A0    62 64.81752 -147.9170
## 65114 2003-04-17 03:14:02      10     2      A0    56 64.81754 -147.9169
## 65211 2003-04-17 03:14:03      10     1      A0    61 64.81757 -147.9169
## 6539  2003-04-17 03:14:04      10     1      A0    52 64.81757 -147.9169
## 65410 2003-04-17 03:14:04      10     1      A0    44 64.81757 -147.9169
##       Status Source BestSignal   Dist Records
## 6498  Active   wing       TRUE  0.000       1
## 65010 Active   wing      FALSE 11.829     102
## 65114 Active   wing      FALSE 11.827     102
## 65211 Active   wing      FALSE  8.965     107
## 6539  Active   wing      FALSE  8.965     107
## 65410 Active   wing      FALSE  8.965     107</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">head</span>(best_detects)</a></code></pre></div>
<pre><code>##                  DateTime Channel TagID Power Latitude Longitude Status
## 6498  2003-04-10 08:40:43      34    80    68 64.86179 -147.7414 Active
## 6885  2003-04-17 03:16:09      22    12    51 64.80855 -147.9275 Active
## 7255  2003-04-17 03:18:16      10    50    50 64.79336 -147.8298 Active
## 7339  2003-04-17 03:18:37      34     4    41 64.79435 -147.8052 Active
## 76112 2003-04-17 03:19:08      22     6    69 64.79181 -147.7695 Active
## 7634  2003-04-17 03:19:12      34    18    72 64.79109 -147.7632 Active
##       Source Records flag
## 6498    wing       1 TRUE
## 6885    wing       1 TRUE
## 7255    wing       1 TRUE
## 7339    wing       1 TRUE
## 76112   wing       1 TRUE
## 7634    wing       2 TRUE</code></pre>
<p>Here, all_detects adds some useful to all_data: all_detects$BestSignal is the signal with the highest power in a detection period, all_detects$Dist is the geodesic distance (in km) between the detection location and the associated highest power detection, and all_detects$Records is number of times that a fish was detected in a detection period. The argument bin_by can be used to adjust the length of the detection period.</p>
<p>best_detects contains the highest power detections. A best detection will be flagged if there are fewer than n_thresh other detections within a distance of dist_max km from the best detection during the detection period. The best detection will also be flagged if a negative linear relationship does not exist between all_detects$Power and all_detects$Dist for all detections within dist_max km from the best signal in the detection period. This information is summarized in best_detects. To remove the flagged detection, set removed_flagged=T.</p>
</div>
<div id="step-5-determine-the-living-status-of-the-fish" class="section level3">
<h3>Step 5 – Determine the living status of the fish</h3>
<p>To flag for dead fish run the following lines of code:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">best_detects &lt;-<span class="st"> </span>best_detects[<span class="op">!</span>best_detects<span class="op">$</span>flag,] <span class="co"># To remove the flagged fish</span></a>
<a class="sourceLine" id="cb22-2" title="2">flagged_fish &lt;-<span class="st"> </span><span class="kw">flag.dead.fish</span>(best_detects, <span class="dt">dist_thresh =</span> <span class="dv">5</span>) <span class="co"># To flag for mortality</span></a>
<a class="sourceLine" id="cb22-3" title="3"><span class="kw">head</span>(flagged_fish)</a></code></pre></div>
<pre><code>##                  DateTime Channel TagID Power Latitude Longitude Status
## 7653  2003-04-17 03:19:13      34     1    77 64.79094 -147.7620 Active
## 7664  2003-04-17 03:19:13      34     2    73 64.79079 -147.7608 Active
## 7784  2003-04-17 03:19:30      10     1    70 64.78846 -147.7405 Active
## 8786  2003-04-17 04:01:01      22    46    83 64.28061 -146.4820   Mort
## 8958  2003-04-17 04:06:23      10    48   117 64.25162 -146.1298 Active
## 90112 2003-04-17 04:12:38      22    47    91 64.17942 -145.7631   Mort
##       Source Records  flag MoveDist MortFlag
## 7653    wing      79 FALSE       NA       No
## 7664    wing      56 FALSE       NA       No
## 7784    wing     107 FALSE       NA       No
## 8786    wing      20 FALSE       NA       No
## 8958    wing      22 FALSE       NA       No
## 90112   wing      17 FALSE       NA       No</code></pre>
<p>Here, a recursive algorithm is used to determine whether or not a fish is alive. Basically, if a fish moves less than dist_thresh km for all consecutive detection periods following the detection, the fish will be flagged as dead. Geodesic distance is currently used to screen for dead fish.</p>
</div>
<div id="step-6-add-the-results-to-an-existing-database" class="section level3">
<h3>Step 6 – Add the results to an existing database</h3>
<p>To add the results to an existing database, find the filepath of your database and run the code</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="co"># filepath &lt;- &quot;D:/Jordy/telprep/telprep2/data/database.csv&quot;</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="co"># add.to.database(filepath, flagged_fish)</span></a></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
